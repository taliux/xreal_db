### 测试API接口 - Xreal智能客服FAQ管理系统
### 使用说明：在IDE中安装REST Client插件，然后点击每个请求上方的"Send Request"执行

### 变量定义
@baseUrl = http://localhost:8080
@contentType = application/json

### ================== 标签管理接口测试 ==================

### 1. 创建标签 - Xreal Air
POST {{baseUrl}}/tags
Content-Type: {{contentType}}

{
  "name": "Xreal Air",
  "description": "Xreal Air AR glasses",
  "active": true
}

###

### 2. 创建标签 - Xreal Air 2
POST {{baseUrl}}/tags
Content-Type: {{contentType}}

{
  "name": "Xreal Air 2",
  "description": "Xreal Air 2 AR glasses - second generation",
  "active": true
}

###

### 3. 创建标签 - Beam
POST {{baseUrl}}/tags
Content-Type: {{contentType}}

{
  "name": "Beam",
  "description": "Beam wireless adapter",
  "active": true
}

###

### 4. 创建标签 - Setup
POST {{baseUrl}}/tags
Content-Type: {{contentType}}

{
  "name": "Setup",
  "description": "Setup and installation guides",
  "active": true
}

###

### 5. 创建标签 - iPhone
POST {{baseUrl}}/tags
Content-Type: {{contentType}}

{
  "name": "iPhone",
  "description": "iPhone compatibility",
  "active": true
}

###

### 6. 创建标签 - Android
POST {{baseUrl}}/tags
Content-Type: {{contentType}}

{
  "name": "Android",
  "description": "Android device compatibility",
  "active": true
}

###

### 7. 创建标签 - Troubleshooting (禁用状态)
POST {{baseUrl}}/tags
Content-Type: {{contentType}}

{
  "name": "Troubleshooting",
  "description": "Problem solving guides",
  "active": false
}

###

### 8. 获取所有标签
GET {{baseUrl}}/tags

###

### 9. 获取激活的标签
GET {{baseUrl}}/tags/active

###

### 10. 更新标签
PUT {{baseUrl}}/tags/Beam
Content-Type: {{contentType}}

{
  "name": "Beam",
  "description": "Beam Pro - Enhanced wireless adapter with spatial computing",
  "active": true
}

###

### 11. 删除标签（注意：如果标签已被FAQ使用，会失败）
DELETE {{baseUrl}}/tags/Troubleshooting

###

### ================== FAQ管理接口测试 ==================

### 12. 创建FAQ - Xreal Air设置指南
POST {{baseUrl}}/faqs
Content-Type: {{contentType}}

{
  "question": "How to set up Xreal Air for the first time?",
  "answer": "1. Unbox your Xreal Air glasses\n2. Connect the USB-C cable to your compatible device\n3. Ensure your device supports DisplayPort Alt Mode\n4. The glasses should automatically activate when connected\n5. Adjust the nose pads and temples for comfort",
  "instruction": "Make sure your device supports DP Alt Mode. Check compatibility at xreal.com/compatibility",
  "url": "https://xreal.com/support/setup-guide",
  "active": true,
  "comment": "Basic setup guide for new users",
  "tags": ["Xreal Air", "Setup"]
}

###

### 13. 创建FAQ - iPhone连接指南
POST {{baseUrl}}/faqs
Content-Type: {{contentType}}

{
  "question": "How to connect Xreal Air 2 to iPhone?",
  "answer": "For iPhone 15 and later: Direct USB-C connection is supported.\nFor iPhone 14 and earlier: You need a Lightning to USB-C adapter (sold separately).\nNote: Not all adapters support video output. Use Apple's official adapter or Xreal certified adapters.",
  "instruction": "Ensure you have the correct adapter for your iPhone model",
  "url": "https://xreal.com/support/iphone-compatibility",
  "active": true,
  "comment": "iPhone connection guide with adapter requirements",
  "tags": ["Xreal Air 2", "iPhone", "Setup"]
}

###

### 14. 创建FAQ - Android连接
POST {{baseUrl}}/faqs
Content-Type: {{contentType}}

{
  "question": "Which Android phones are compatible with Xreal glasses?",
  "answer": "Most Android phones with USB-C ports that support DisplayPort Alt Mode are compatible. This includes:\n- Samsung Galaxy S20 and later\n- Google Pixel 6 and later\n- OnePlus 8 and later\n- Many other flagship Android devices",
  "instruction": "Check your specific device at xreal.com/compatibility",
  "url": "https://xreal.com/support/android-compatibility",
  "active": true,
  "comment": "Android compatibility list",
  "tags": ["Xreal Air", "Xreal Air 2", "Android", "Setup"]
}

###

### 15. 创建FAQ - Beam使用指南
POST {{baseUrl}}/faqs
Content-Type: {{contentType}}

{
  "question": "How to use Beam with Xreal glasses?",
  "answer": "1. Charge Beam fully before first use (2-3 hours)\n2. Connect your source device to Beam's input port\n3. Connect Xreal glasses to Beam's output port\n4. Press power button to turn on Beam\n5. Use Beam's controls to adjust display modes",
  "instruction": "Beam provides wireless connectivity and additional display modes",
  "url": "https://xreal.com/support/beam-guide",
  "active": true,
  "comment": "Beam accessory usage guide",
  "tags": ["Beam", "Xreal Air", "Xreal Air 2"]
}

###

### 16. 创建FAQ - 故障排除（非激活状态）
POST {{baseUrl}}/faqs
Content-Type: {{contentType}}

{
  "question": "What to do if the display is not showing?",
  "answer": "1. Check cable connections\n2. Verify device compatibility\n3. Restart your device\n4. Try a different USB-C port\n5. Contact support if issue persists",
  "instruction": "Basic troubleshooting steps",
  "url": "https://xreal.com/support/troubleshooting",
  "active": false,
  "comment": "Basic troubleshooting guide - currently disabled",
  "tags": ["Xreal Air", "Xreal Air 2"]
}

###

### 17. 获取所有FAQ（默认分页）
GET {{baseUrl}}/faqs

###

### 18. 获取所有FAQ（自定义分页和排序）
GET {{baseUrl}}/faqs?page=0&size=5&sort=timestamp,desc

###

### 19. 获取激活的FAQ
GET {{baseUrl}}/faqs?active=true

###

### 20. 获取非激活的FAQ
GET {{baseUrl}}/faqs?active=false

###

### 21. 根据标签搜索FAQ - 单个标签
GET {{baseUrl}}/faqs/search?tags=Setup

###

### 22. 根据标签搜索FAQ - 多个标签（任一匹配）
GET {{baseUrl}}/faqs/search?tags=iPhone&tags=Android

###

### 23. 根据标签搜索激活的FAQ
GET {{baseUrl}}/faqs/search?tags=Beam&active=true

###

### 24. 获取特定FAQ（需要替换{id}为实际ID）
GET {{baseUrl}}/faqs/1

###

### 25. 更新FAQ（需要替换{id}为实际ID）
PUT {{baseUrl}}/faqs/1
Content-Type: {{contentType}}

{
  "question": "How to set up Xreal Air for the first time? [Updated]",
  "answer": "Updated answer with more details:\n1. Unbox your Xreal Air glasses carefully\n2. Connect the USB-C cable to your compatible device\n3. Ensure your device supports DisplayPort Alt Mode\n4. The glasses should automatically activate when connected\n5. Adjust the nose pads and temples for comfort\n6. Download Nebula app for additional features",
  "instruction": "Updated: Download Nebula app from app store for best experience",
  "url": "https://xreal.com/support/setup-guide-v2",
  "active": true,
  "comment": "Updated setup guide with Nebula app info",
  "tags": ["Xreal Air", "Setup", "Android"]
}

###

### 26. 删除特定FAQ（需要替换{id}为实际ID）
DELETE {{baseUrl}}/faqs/1

###

### 27. 删除所有FAQ（谨慎使用！）
DELETE {{baseUrl}}/faqs/all

###

### ================== 错误测试用例 ==================

### 28. 创建FAQ - 缺少必填字段（应返回400错误）
POST {{baseUrl}}/faqs
Content-Type: {{contentType}}

{
  "answer": "This FAQ is missing the question field"
}

###

### 29. 创建重复标签（应返回409冲突错误）
POST {{baseUrl}}/tags
Content-Type: {{contentType}}

{
  "name": "Xreal Air",
  "description": "Duplicate tag test",
  "active": true
}

###

### 30. 获取不存在的FAQ（应返回404错误）
GET {{baseUrl}}/faqs/99999

###

### 31. 更新不存在的FAQ（应返回404错误）
PUT {{baseUrl}}/faqs/99999
Content-Type: {{contentType}}

{
  "question": "Non-existent FAQ",
  "answer": "This FAQ doesn't exist",
  "active": true,
  "tags": ["Xreal Air"]
}

###

### 32. 删除不存在的标签（应返回404错误）
DELETE {{baseUrl}}/tags/NonExistentTag

###